<!DOCTYPE html>
<html>
<head>
    <title>Bản đồ vị trí hiện tại</title>
</head>
<body>
    <h2>Vị trí hiện tại của bạn</h2>
    <iframe
        id="mapFrame"
        width="600"
        height="450"
        style="border:0;"
        allowfullscreen
        loading="lazy">
    </iframe>

    <script>
        // Lấy tọa độ hiện tại
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(position => {
                const lat = position.coords.latitude;
                const lng = position.coords.longitude;

                // Gán src của iframe với Embed API
                const iframe = document.getElementById('mapFrame');
                iframe.src = `https://www.google.com/maps/embed/v1/place?key=AIzaSyCFYNTEIsshb7-xRsWFRAqn5G6lDUO3nN8&q=${lat},${lng}&zoom=15`;
            }, error => {
                alert("Không thể lấy vị trí của bạn: " + error.message);
            });
        } else {
            alert("Trình duyệt của bạn không hỗ trợ Geolocation.");
        }
    </script>
</body>
</html>


<!-- <!DOCTYPE html>
<html>
<head>
    <title>Bản đồ vị trí hiện tại + theo dõi</title>
    <style>
        #map {
            height: 450px;
            width: 600px;
        }
    </style>
</head>
<body>
    <h2>Vị trí hiện tại của bạn (tự cập nhật khi di chuyển)</h2>
    <div id="map"></div>

    <script>
        let map;
        let marker;

        function initMap() {
            // Khởi tạo bản đồ tạm thời ở Hà Nội nếu không lấy được vị trí
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 15,
                center: { lat: 20.9826, lng: 105.8757 }
            });

            marker = new google.maps.Marker({
                position: map.getCenter(),
                map: map,
                title: "Bạn đang ở đây"
            });

            // Kiểm tra trình duyệt hỗ trợ geolocation
            if (navigator.geolocation) {
                // watchPosition theo dõi liên tục
                navigator.geolocation.watchPosition(
                    position => {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        const userLocation = { lat, lng };

                        // Cập nhật vị trí marker và trung tâm bản đồ
                        marker.setPosition(userLocation);
                        map.setCenter(userLocation);
                    },
                    error => {
                        alert("Không thể lấy vị trí: " + error.message);
                    },
                    { enableHighAccuracy: true, maximumAge: 0 }
                );
            } else {
                alert("Trình duyệt của bạn không hỗ trợ Geolocation.");
            }
        }
    </script>

    <script async
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCFYNTEIsshb7-xRsWFRAqn5G6lDUO3nN8&callback=initMap">
    </script>
</body>
</html> -->
